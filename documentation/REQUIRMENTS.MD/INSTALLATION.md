# Installation Guide

This guide will walk you through installing the Laravel eCommerce System on your server.

## üìã Server Requirements

Before installing, ensure your server meets the following requirements:

- **PHP**: 8.3 or higher
- **Composer**: Latest version
- **Database**: MySQL 5.7+, PostgreSQL 10+, or SQLite 3.8+
- **Web Server**: Apache 2.4+, Nginx 1.18+, or Laravel Valet
- **PHP Extensions**:
  - BCMath
  - Ctype
  - cURL
  - DOM
  - Fileinfo
  - JSON
  - Mbstring
  - OpenSSL
  - PCRE
  - PDO
  - Tokenizer
  - XML
  - GD (for CAPTCHA and image processing)
- **Node.js**: 18+ (for asset compilation, optional)
- **NPM**: Latest version (for asset compilation, optional)

## üöÄ Installation Steps

### Step 1: Upload Files

1. Extract the downloaded ZIP file
2. Upload all files to your web server's document root (e.g., `public_html`, `www`, or `htdocs`)
3. Ensure the `public` folder is your document root, or configure your web server accordingly

### Step 2: Set File Permissions

Set the following permissions:

```bash
chmod -R 755 storage bootstrap/cache
chmod -R 775 storage bootstrap/cache
```

**Note**: On some servers, you may need to use `775` for the `storage` and `bootstrap/cache` directories.

### Step 3: Install Dependencies

#### Install PHP Dependencies

```bash
composer install --no-dev --optimize-autoloader
```

For development:
```bash
composer install
```

#### Install Node Dependencies (Optional)

```bash
npm install
```

### Step 4: Environment Configuration

1. Copy the `.env.example` file to `.env`:
   ```bash
   cp .env.example .env
   ```

2. Generate application key:
   ```bash
   php artisan key:generate
   ```

3. Edit the `.env` file with your configuration:

```env
APP_NAME="Your Store Name"
APP_ENV=production
APP_KEY=base64:... (generated by key:generate)
APP_DEBUG=false
APP_URL=https://yourdomain.com

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=your_database_name
DB_USERNAME=your_database_user
DB_PASSWORD=your_database_password

MAIL_MAILER=smtp
MAIL_HOST=your-smtp-host
MAIL_PORT=587
MAIL_USERNAME=your-email@example.com
MAIL_PASSWORD=your-email-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="${APP_NAME}"
```

### Step 5: Database Setup

1. Create a new database in your MySQL/PostgreSQL server
2. Update the database credentials in your `.env` file
3. Run migrations and seeders:

```bash
php artisan migrate --seed
```

This will:
- Create all necessary database tables
- Create default admin account (email: `admin@example.com`, password: `password`)
- Create test user account (email: `test@example.com`, password: `password`)
- Seed sample categories, products, currencies, and coupons
- Set up roles and permissions
- Create default pages (Help Center, Shipping Info, Returns, Contact Us)

### Step 6: Create Storage Link

Link the storage directory for public access:

```bash
php artisan storage:link
```

### Step 7: Compile Assets (Optional but Recommended)

For production:
```bash
npm run build
```

For development:
```bash
npm run dev
```

### Step 8: Optimize Application (Production Only)

```bash
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

### Step 9: Configure Web Server

#### Apache Configuration

Ensure your `.htaccess` file in the `public` directory is present and configured. The file should redirect all requests to `index.php`.

#### Nginx Configuration

Add the following to your Nginx server block:

```nginx
server {
    listen 80;
    server_name yourdomain.com;
    root /path/to/your/project/public;

    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-Content-Type-Options "nosniff";

    index index.php;

    charset utf-8;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location = /favicon.ico { access_log off; log_not_found off; }
    location = /robots.txt  { access_log off; log_not_found off; }

    error_page 404 /index.php;

    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.3-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /\.(?!well-known).* {
        deny all;
    }
}
```

### Step 10: Access the Application

1. **Frontend**: Visit `https://yourdomain.com`
2. **Admin Panel**: Visit `https://yourdomain.com/admin/login`
   - Email: `admin@example.com`
   - Password: `password`

**‚ö†Ô∏è IMPORTANT**: Change the default admin password immediately after first login!

## üîß Post-Installation Configuration

### 1. Update Admin Credentials

1. Log in to the admin panel
2. Go to **Administrators** ‚Üí Edit your admin account
3. Change the password to a secure one

### 2. Configure Site Settings

Go to **Admin ‚Üí Site Settings** and configure:
- Site name and tagline
- Logo and favicon
- SEO settings
- Social media links
- Feature toggles (wishlist, reviews, newsletter)

### 3. Configure Payment Gateways

Go to **Admin ‚Üí Payment Gateways**:
- **Stripe**: Enter your Stripe API keys
- **PayPal**: Enter your PayPal client ID and secret
- **COD**: Enable/disable Cash on Delivery

### 4. Configure Email Settings

Go to **Admin ‚Üí Email Settings**:
- Enter your SMTP credentials
- Test the email configuration

### 5. Configure Shipping

Go to **Admin ‚Üí Shipping Settings**:
- Enable/disable shipping
- Set free shipping threshold
- Configure shipping rates by country/city

### 6. Configure Currencies

Go to **Admin ‚Üí Currencies**:
- Add your currencies
- Set exchange rates
- Set default currency

### 7. Set Up Coins System (Optional)

Go to **Admin ‚Üí Coin Settings**:
- Enable/disable coins system
- Configure coin awards
- Set up referral bonuses

## üêõ Common Installation Issues

### Issue: "500 Internal Server Error"

**Solutions**:
1. Check file permissions: `chmod -R 755 storage bootstrap/cache`
2. Check `.env` file exists and is configured correctly
3. Check `APP_KEY` is set: `php artisan key:generate`
4. Check web server error logs
5. Ensure `APP_DEBUG=true` temporarily to see detailed errors

### Issue: "Storage link not working"

**Solution**:
```bash
php artisan storage:link
```

If the link already exists, remove it first:
```bash
rm public/storage
php artisan storage:link
```

### Issue: "Class not found" or "Autoload error"

**Solutions**:
1. Run `composer install`
2. Run `composer dump-autoload`
3. Clear cache: `php artisan config:clear && php artisan cache:clear`

### Issue: "Database connection error"

**Solutions**:
1. Verify database credentials in `.env`
2. Ensure database exists
3. Check database user has proper permissions
4. Verify database server is running

### Issue: "Permission denied" errors

**Solutions**:
1. Set correct ownership: `chown -R www-data:www-data storage bootstrap/cache`
2. Set correct permissions: `chmod -R 775 storage bootstrap/cache`
3. On shared hosting, contact your hosting provider

### Issue: "Route not found" or "404 errors"

**Solutions**:
1. Ensure `.htaccess` file exists in `public` directory
2. Check web server configuration
3. Run `php artisan route:clear`
4. For Apache, ensure `mod_rewrite` is enabled

### Issue: "CAPTCHA not displaying"

**Solution**:
- Ensure PHP GD extension is installed: `php -m | grep gd`
- Install GD extension if missing

## üîí Security Checklist

After installation, ensure:

- [ ] `APP_DEBUG=false` in production
- [ ] `APP_ENV=production` in production
- [ ] Default admin password changed
- [ ] Default test user password changed (or user deleted)
- [ ] File permissions set correctly
- [ ] `.env` file is not publicly accessible
- [ ] SSL certificate installed (HTTPS)
- [ ] Database credentials are secure
- [ ] Payment gateway keys are configured
- [ ] Email settings are configured

## üìû Getting Help

If you encounter issues during installation:

1. Check the error logs in `storage/logs/laravel.log`
2. Enable debug mode temporarily: `APP_DEBUG=true` in `.env`
3. Review the Common Issues section above
4. Contact support with:
   - Error message
   - PHP version
   - Server type (Apache/Nginx)
   - Laravel version
   - Steps to reproduce

## ‚úÖ Verification

After installation, verify everything works:

1. ‚úÖ Frontend loads correctly
2. ‚úÖ Admin login works
3. ‚úÖ Products display on homepage
4. ‚úÖ Can add products to cart
5. ‚úÖ Can create an order
6. ‚úÖ Admin can view orders
7. ‚úÖ Email sending works (test from admin panel)
8. ‚úÖ Payment gateways configured
9. ‚úÖ Images display correctly
10. ‚úÖ Search functionality works

---

**Installation Complete!** üéâ

You can now start customizing your eCommerce store.

